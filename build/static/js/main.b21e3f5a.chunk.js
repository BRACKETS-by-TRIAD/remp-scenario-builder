(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(25)},17:function(e,t,a){},19:function(e,t,a){},23:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"NodeModel",function(){return k}),a.d(n,"NodeFactory",function(){return M}),a.d(n,"PortModel",function(){return w});var r={};a.r(r),a.d(r,"NodeModel",function(){return D}),a.d(r,"NodeFactory",function(){return C}),a.d(r,"PortModel",function(){return _});var i={};a.r(i),a.d(i,"NodeModel",function(){return S}),a.d(i,"NodeFactory",function(){return L}),a.d(i,"PortModel",function(){return W});var o={};a.r(o),a.d(o,"NodeModel",function(){return z}),a.d(o,"NodeFactory",function(){return I}),a.d(o,"PortModel",function(){return x});var c=a(0),s=a.n(c),l=a(11),d=a.n(l),u=(a(17),a(2)),m=a(6),h=a(3),g=a(1),b=a(4),p=(a(19),a(7)),f=a(5),v=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.createElement("div",{className:"tray"},this.props.children)}}]),t}(c.Component);v.defaultProps={};var O=a(9),j=function(e){function t(e,a){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).cb=a,n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"getNewInstance",value:function(e){return this.cb(e)}}]),t}(f.AbstractPortFactory),N=a(8),y=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left",n=arguments.length>1?arguments[1]:void 0;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this,a,n))).position=a,e.in="left"===e.position,e}return Object(b.a)(t,e),Object(m.a)(t,[{key:"link",value:function(e){var t=this.createLinkModel();return t.setSourcePort(this),t.setTargetPort(e),t}},{key:"canLinkToPort",value:function(e){return this.in!==e.in}},{key:"serialize",value:function(){return p.merge(Object(N.a)(Object(g.a)(t.prototype),"serialize",this).call(this),{position:this.position})}},{key:"deSerialize",value:function(e,a){Object(N.a)(Object(g.a)(t.prototype),"deSerialize",this).call(this,e,a),this.position=e.position}},{key:"createLinkModel",value:function(){return new f.DefaultLinkModel}}]),t}(f.PortModel),E=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",n=arguments.length>1?arguments[1]:void 0;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this,a,n))).position=a,e}return Object(b.a)(t,e),Object(m.a)(t,[{key:"serialize",value:function(){return p.merge(Object(N.a)(Object(g.a)(t.prototype),"serialize",this).call(this),{position:this.position})}},{key:"deSerialize",value:function(e,a){Object(N.a)(Object(g.a)(t.prototype),"deSerialize",this).call(this,e,a),this.position=e.position}},{key:"createLinkModel",value:function(){return new f.DefaultLinkModel}}]),t}(f.PortModel),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left";return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).call(this,e,"action"))}return Object(b.a)(t,e),t}(y),k=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,"action"))).name=e.title||"Action",a.addPort(new w("left")),a.addPort(new w("right")),a}return Object(b.a)(t,e),t}(f.NodeModel),P=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"bem",value:function(e){return this.props.classBaseName+e+" "+this.props.className+e+" "}},{key:"getClassName",value:function(){return this.props.classBaseName+" "+this.props.className}},{key:"render",value:function(){return c.createElement("div",{className:this.getClassName(),style:{background:this.props.node.color}},c.createElement("div",{className:"node-container"},c.createElement("div",{className:this.bem("__ports")},c.createElement("div",{className:this.bem("__left")},c.createElement(f.PortWidget,{name:"left",node:this.props.node})),c.createElement("div",{className:this.bem("__right")},c.createElement(f.PortWidget,{name:"right",node:this.props.node})))),c.createElement("div",{className:this.bem("__title")},c.createElement("div",{className:this.bem("__name")},this.props.node.name)))}}]),t}(c.Component);P.defaultProps={node:null};var M=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).call(this,"action"))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"generateReactWidget",value:function(e,t){return c.createElement(P,{node:t,classBaseName:"square-node",className:"action-node"})}},{key:"getNewInstance",value:function(){return new k}}]),t}(f.AbstractNodeFactory),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).call(this,e,"segment"))}return Object(b.a)(t,e),t}(E),D=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,"segment"))).name=e.title||"Segment",a.addPort(new _("left")),a.addPort(new _("bottom")),a.addPort(new _("right")),a}return Object(b.a)(t,e),t}(f.NodeModel),F=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"bem",value:function(e){return this.props.classBaseName+e+" "+this.props.className+e+" "}},{key:"getClassName",value:function(){return this.props.classBaseName+" "+this.props.className}},{key:"render",value:function(){return c.createElement("div",{className:this.getClassName(),style:{background:this.props.node.color}},c.createElement("div",{className:this.bem("__title")},c.createElement("div",{className:this.bem("__name")},this.props.node.name)),c.createElement("div",{className:"node-container"},c.createElement("div",{className:this.bem("__ports")},c.createElement("div",{className:this.bem("__left")},c.createElement(f.PortWidget,{name:"left",node:this.props.node})),c.createElement("div",{className:this.bem("__right")},c.createElement(f.PortWidget,{name:"right",node:this.props.node})),c.createElement("div",{className:this.bem("__bottom")},c.createElement(f.PortWidget,{name:"bottom",node:this.props.node})))))}}]),t}(c.Component);F.defaultProps={node:null};var C=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).call(this,"segment"))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"generateReactWidget",value:function(e,t){return c.createElement(F,{node:t,classBaseName:"diamond-node",className:"segment-node"})}},{key:"getNewInstance",value:function(){return new D}}]),t}(f.AbstractNodeFactory),W=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left";return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).call(this,e,"trigger"))}return Object(b.a)(t,e),t}(y),S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,"trigger"))).name=e.title||"Trigger",a.addPort(new W("right")),a}return Object(b.a)(t,e),t}(f.NodeModel),B=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"bem",value:function(e){return this.props.classBaseName+e+" "+this.props.className+e+" "}},{key:"getClassName",value:function(){return this.props.classBaseName+" "+this.props.className}},{key:"render",value:function(){return c.createElement("div",{className:this.getClassName(),style:{background:this.props.node.color}},c.createElement("div",{className:"node-container"},c.createElement("div",{className:this.bem("__ports")},c.createElement("div",{className:this.bem("__right")},c.createElement(f.PortWidget,{name:"right",node:this.props.node})))),c.createElement("div",{className:this.bem("__title")},c.createElement("div",{className:this.bem("__name")},this.props.node.name)))}}]),t}(c.Component);B.defaultProps={node:null};var L=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).call(this,"trigger"))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"generateReactWidget",value:function(e,t){return c.createElement(B,{node:t,classBaseName:"square-node",className:"trigger-node"})}},{key:"getNewInstance",value:function(){return new S}}]),t}(f.AbstractNodeFactory),x=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left";return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).call(this,e,"wait"))}return Object(b.a)(t,e),t}(y),z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,"wait"))).name=e.title||"Wait",a.addPort(new x("left")),a.addPort(new x("right")),a}return Object(b.a)(t,e),t}(f.NodeModel),A=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"bem",value:function(e){return this.props.classBaseName+e+" "+this.props.className+e+" "}},{key:"getClassName",value:function(){return this.props.classBaseName+" "+this.props.className}},{key:"render",value:function(){return c.createElement("div",{className:this.getClassName(),style:{background:this.props.node.color}},c.createElement("div",{className:"node-container"},c.createElement("div",{className:this.bem("__ports")},c.createElement("div",{className:this.bem("__left")},c.createElement(f.PortWidget,{name:"left",node:this.props.node})),c.createElement("div",{className:this.bem("__right")},c.createElement(f.PortWidget,{name:"right",node:this.props.node})))),c.createElement("div",{className:this.bem("__title")},c.createElement("div",{className:this.bem("__name")},this.props.node.name)))}}]),t}(c.Component);A.defaultProps={node:null};var I=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).call(this,"wait"))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"generateReactWidget",value:function(e,t){return c.createElement(A,{node:t,classBaseName:"round-node",className:"wait-node"})}},{key:"getNewInstance",value:function(){return new z}}]),t}(f.AbstractNodeFactory),T=(a(23),function(){function e(){Object(u.a)(this,e),this.diagramEngine=new f.DiagramEngine,this.diagramEngine.installDefaultFactories(),this.activeModel=new f.DiagramModel,this.payload={triggers:[{id:"abcd",title:"On event registration",type:"event",event:{name:"registration"},elements:[{id:"abcd1",title:"Wait (1 minute)",type:"wait",wait:{minutes:5,descendants:["abcd12","abcd12"]}},{id:"abcd2",title:"Segment 1",type:"segment",segment:{code:"segment1",descendants_positive:["abcd21","abcd22"],descendants_negative:["abcd23","abcd24"]}},{id:"abcd3",title:"Send registration email",type:"action",action:{type:"email",email:{code:"mail_template_123"},descendants:["abcd31","abcd32"]}}]}],visual:{abcd:{x:100,y:150},abcd1:{x:400,y:150},abcd2:{x:400,y:300},abcd3:{x:400,y:25}}},this.registerModels(),this.renderPayload(),this.diagramEngine.setDiagramModel(this.activeModel)}return Object(m.a)(e,[{key:"registerModels",value:function(){this.diagramEngine.registerPortFactory(new j("action",function(e){return new n.PortModel})),this.diagramEngine.registerNodeFactory(new n.NodeFactory),this.diagramEngine.registerPortFactory(new j("segment",function(e){return new r.PortModel})),this.diagramEngine.registerNodeFactory(new r.NodeFactory),this.diagramEngine.registerPortFactory(new j("trigger",function(e){return new i.PortModel})),this.diagramEngine.registerNodeFactory(new i.NodeFactory),this.diagramEngine.registerPortFactory(new j("wait",function(e){return new o.PortModel})),this.diagramEngine.registerNodeFactory(new o.NodeFactory)}},{key:"renderPayload",value:function(){var e=this;p.flatMap(this.payload.triggers,function(t){var a=e.payload.visual[t.id],c=new i.NodeModel(t);c.setPosition(a.x,a.y);var s=t.elements.map(function(t){var a=null,i=e.payload.visual[t.id];return"action"===t.type?a=new n.NodeModel(t):"segment"===t.type?a=new r.NodeModel(t):"wait"===t.type&&(a=new o.NodeModel(t)),a.setPosition(i.x,i.y),a}),l=s.map(function(e){return c.getPort("right").link(e.getPort("left"))});return[c].concat(Object(O.a)(s),Object(O.a)(l))}).forEach(function(t){t instanceof f.LinkModel?e.activeModel.addLink(t):t instanceof f.NodeModel&&e.activeModel.addNode(t)})}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),e}()),R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return c.createElement("div",{style:{borderColor:this.props.color},draggable:!0,onDragStart:function(t){t.dataTransfer.setData("storm-diagram-node",JSON.stringify(e.props.model))},className:"tray-item"},this.props.name)}}]),t}(c.Component),J=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).cloneSelected=function(){var e=a.props.app.getDiagramEngine(),t=0,n=100,r=e.getDiagramModel(),i={};p.forEach(r.getSelectedItems(),function(e){var a=e.clone(i);a instanceof f.NodeModel?(a.setPosition(a.x+t,a.y+n),r.addNode(a)):a instanceof f.LinkModel&&(a.getPoints().forEach(function(e){e.updateLocation({x:e.getX()+t,y:e.getY()+n})}),r.addLink(a)),a.selected=!1}),a.forceUpdate()},a.state={},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t={className:"srd-demo-canvas",diagramEngine:this.props.app.getDiagramEngine(),maxNumberPointsPerLink:0,allowLooseLinks:!1};return c.createElement("div",{className:"body"},c.createElement("div",{className:"header"},c.createElement("div",{className:"title"},"Storm React Diagrams - Demo 5"),"\xa0",c.createElement("button",{onClick:function(){return e.props.app.getDiagramEngine().zoomToFit()}},"Zoom to fit"),"\xa0",c.createElement("button",{onClick:this.cloneSelected},"Clone Selected")),c.createElement("div",{className:"content"},c.createElement(v,null,c.createElement(R,{model:{type:"trigger"},name:"Trigger",color:"rgb(0,192,255)"}),c.createElement(R,{model:{type:"segment"},name:"Segment",color:"rgb(0,192,255)"}),c.createElement(R,{model:{type:"wait"},name:"Wait",color:"rgb(0,192,255)"}),c.createElement(R,{model:{type:"action"},name:"Action",color:"rgb(192,255,0)"})),c.createElement("div",{className:"diagram-layer",onDrop:function(t){var a=JSON.parse(t.dataTransfer.getData("storm-diagram-node")),c=p.keys(e.props.app.getDiagramEngine().getDiagramModel().getNodes()).length,s=null;"action"===a.type?s=new n.NodeModel("Node "+(c+1),"rgb(192,255,0)"):"segment"===a.type?s=new r.NodeModel("Node "+(c+1),"rgb(0,192,255)"):"trigger"===a.type?s=new i.NodeModel("Node "+(c+1),"rgb(0,192,255)"):"wait"===a.type&&(s=new o.NodeModel("Node "+(c+1),"rgb(0,192,255)"));var l=e.props.app.getDiagramEngine().getRelativeMousePoint(t);s.x=l.x,s.y=l.y,e.props.app.getDiagramEngine().getDiagramModel().addNode(s),e.forceUpdate()},onDragOver:function(e){e.preventDefault()}},c.createElement(f.DiagramWidget,t))))}}]),t}(c.Component),q=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=new T;return s.a.createElement(J,{app:e})}}]),t}(c.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(s.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,2,1]]]);
//# sourceMappingURL=main.b21e3f5a.chunk.js.map